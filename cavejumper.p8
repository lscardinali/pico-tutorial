pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- cave runner
-- main

function _init()
	game_over = false
	make_cave()
	make_player()
end

function _update()
	update_cave()
	move_player()
end

function _draw()
	cls()
	draw_cave()
	draw_player()
end

-->8
function make_player()
	player={}
	player.x 				=	24
	player.y 				=	60
	player.dy 			= 0
	player.rise 	= 1
	player.fall 	= 2
	player.dead 	= 3
	player.speed = 2
	player.score = 0
end

function draw_player()
	if (game_over) then
		spr(player.dead,player.x,player.y)
	elseif (player.dy < 0) then
		spr(player.rise,player.x,player.y)
	else
		spr(player.fall,player.x,player.y)
	end
end

function move_player()
	gravity = 0.2
	player.dy += gravity
	
	if(btnp(⬆️)) then
		player.dy-=5
	end
	
	player.y += player.dy
end
-->8
function make_cave()
	cave={{["top"]=5,["btm"]=119}}
	top=45
	btm=85
end

function update_cave() {
	if (#cave>player.speed) then
		for i=1,player.speed do
			del(cave,cave[1])
		end
	end
	
	while (#cave<128) do
__gfx__
0000000000aaaa0000aaaa0000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaaa00aaaaaa008888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aa1aa1aaaaaaaaaa88988988000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aaaaaaaaaa1aa1aa88888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aa1111aaaaaaaaaa88899888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaa11aaaaaa11aaa88988988000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaaa00aa11aa008888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000aaaa0000aaaa0000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
